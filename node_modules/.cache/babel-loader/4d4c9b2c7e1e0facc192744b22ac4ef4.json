{"ast":null,"code":"var _jsxFileName = \"E:\\\\Agile Web App\\\\social media (frontend)\\\\src\\\\user\\\\DeleteUser.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { isAuthenticated } from '../auth';\nimport { signout } from '../auth';\n\nclass DeleteUser extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      redirect: false\n    };\n\n    this.deleteAccount = () => {\n      // console.log(\"delete account\");\n      const token = isAuthenticated().token;\n      const userId = this.props.userId;\n      this.remove(userId, token).then(data => {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          //signout (takes function as an arguement)\n          signout(() => console.log(\"USER DELETED\")); //and redirect -> we need state\n\n          this.setState({\n            redirect: true\n          });\n        }\n      });\n    };\n\n    this.remove = (userId, token) => {\n      return fetch(`${process.env.REACT_APP_API_URL}/user/${userId}`, {\n        method: \"DELETE\",\n        // to make only authenticated user make the request\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          // jwt token from the isAuthenticated function\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        return response.json();\n      }).catch(err => console.log(err));\n    };\n\n    this.deleteConfirm = () => {\n      //we are using alert given by window in default\n      let answer = window.confirm(\"Are you sure you want to delete your account?\");\n\n      if (answer) {\n        this.deleteAccount();\n      }\n    };\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.deleteConfirm,\n      className: \"btn btn-raised btn-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, \"DELETE ACCOUNT\");\n  }\n\n}\n\nexport default DeleteUser;","map":{"version":3,"sources":["E:/Agile Web App/social media (frontend)/src/user/DeleteUser.js"],"names":["React","Component","Redirect","isAuthenticated","signout","DeleteUser","state","redirect","deleteAccount","token","userId","props","remove","then","data","error","console","log","setState","fetch","process","env","REACT_APP_API_URL","method","headers","Accept","Authorization","response","json","catch","err","deleteConfirm","answer","window","confirm","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,eAAT,QAAgC,SAAhC;AACA,SAASC,OAAT,QAAwB,SAAxB;;AAEA,MAAMC,UAAN,SAAyBJ,SAAzB,CAAmC;AAAA;AAAA;AAAA,SAE/BK,KAF+B,GAEvB;AACJC,MAAAA,QAAQ,EAAE;AADN,KAFuB;;AAAA,SAO/BC,aAP+B,GAOf,MAAM;AAClB;AACA,YAAMC,KAAK,GAAGN,eAAe,GAAGM,KAAhC;AACA,YAAMC,MAAM,GAAG,KAAKC,KAAL,CAAWD,MAA1B;AACA,WAAKE,MAAL,CAAYF,MAAZ,EAAoBD,KAApB,EACCI,IADD,CACMC,IAAI,IAAI;AACV,YAAGA,IAAI,CAACC,KAAR,EAAc;AACVC,UAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB;AAAwB,SAD5B,MAEI;AACA;AACAX,UAAAA,OAAO,CAAC,MAAIY,OAAO,CAACC,GAAR,CAAY,cAAZ,CAAL,CAAP,CAFA,CAGA;;AACA,eAAKC,QAAL,CAAc;AAACX,YAAAA,QAAQ,EAAC;AAAV,WAAd;AACH;AAEJ,OAXD;AAYH,KAvB8B;;AAAA,SA0B/BK,MA1B+B,GA0BtB,CAACF,MAAD,EAASD,KAAT,KAAiB;AACtB,aAAOU,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,SAAQZ,MAAO,EAAjD,EAAoD;AAC5Da,QAAAA,MAAM,EAAC,QADqD;AAE5D;AACAC,QAAAA,OAAO,EAAE;AACLC,UAAAA,MAAM,EAAE,kBADH;AAEL,0BAAgB,kBAFX;AAGL;AACAC,UAAAA,aAAa,EAAG,UAASjB,KAAM;AAJ1B;AAHmD,OAApD,CAAL,CAUNI,IAVM,CAUDc,QAAQ,IAAG;AACb,eAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,OAZM,EAaNC,KAbM,CAaAC,GAAG,IAAId,OAAO,CAACC,GAAR,CAAYa,GAAZ,CAbP,CAAP;AAcH,KAzC8B;;AAAA,SA6C/BC,aA7C+B,GA6Cf,MAAK;AACjB;AACA,UAAIC,MAAM,GAAGC,MAAM,CAACC,OAAP,CAAe,+CAAf,CAAb;;AACA,UAAGF,MAAH,EAAU;AACN,aAAKxB,aAAL;AACH;AACJ,KAnD8B;AAAA;;AAqD/B2B,EAAAA,MAAM,GAAG;AACL,QAAG,KAAK7B,KAAL,CAAWC,QAAd,EAAuB;AACnB,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AACD,wBACI;AAAQ,MAAA,OAAO,EAAE,KAAKwB,aAAtB;AAAqC,MAAA,SAAS,EAAC,2BAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ;AAGH;;AA5D8B;;AA+DnC,eAAe1B,UAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { isAuthenticated } from '../auth';\nimport { signout } from '../auth';\n\nclass DeleteUser extends Component {\n\n    state = {\n        redirect: false\n    }\n\n\n    deleteAccount = () => {\n        // console.log(\"delete account\");\n        const token = isAuthenticated().token\n        const userId = this.props.userId\n        this.remove(userId, token)\n        .then(data => {\n            if(data.error){\n                console.log(data.error)}\n            else{\n                //signout (takes function as an arguement)\n                signout(()=>console.log(\"USER DELETED\"))\n                //and redirect -> we need state\n                this.setState({redirect:true})\n            }\n\n        })\n    }\n\n\n    remove = (userId, token)=>{\n        return fetch(`${process.env.REACT_APP_API_URL}/user/${userId}`, {\n            method:\"DELETE\",\n            // to make only authenticated user make the request\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n                // jwt token from the isAuthenticated function\n                Authorization: `Bearer ${token}`\n            }\n        })\n        .then(response =>{\n            return response.json()\n        })\n        .catch(err => console.log(err))\n    }\n\n    //asks for user confirmation to delete the account\n    //after the response by the user deleteAccount function is called\n    deleteConfirm = () =>{\n        //we are using alert given by window in default\n        let answer = window.confirm(\"Are you sure you want to delete your account?\")\n        if(answer){\n            this.deleteAccount();\n        }\n    }\n\n    render() {\n        if(this.state.redirect){\n            return <Redirect to=\"/\"/>\n        }\n        return (\n            <button onClick={this.deleteConfirm} className=\"btn btn-raised btn-danger\">DELETE ACCOUNT</button>\n        );\n    }\n}\n\nexport default DeleteUser;"]},"metadata":{},"sourceType":"module"}